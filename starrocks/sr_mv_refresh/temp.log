-- start starrocks server via dockwer
docker run -p 9030:9030 -p 8030:8030 -p 8040:8040 -itd --name quickstart starrocks/allin1-ubuntu
-- start starrocks client from container
docker exec -it quickstart mysql -P 9030 -h 127.0.0.1 -u root --prompt="StarRocks > "

show tables like '%xl%';

DROP MATERIALIZED VIEW IF EXISTS `xl_siem_5min_mv_sample`;
CREATE MATERIALIZED VIEW IF NOT EXISTS `xl_siem_5min_mv_sample` (`adomid`, `mv_itime`, `src_ip`, `logcnt`)
PARTITION BY (time_slice(`mv_itime`, INTERVAL 5 minute))
DISTRIBUTED BY RANDOM
REFRESH ASYNC 
PROPERTIES (
"replicated_storage" = "true",
"replication_num" = "1",
"storage_medium" = "HDD"
)
AS SELECT base.`adomid`, time_slice(base.`itime`, INTERVAL 5 minute, floor) AS `mv_itime`, base.`src_ip`, count(*) AS `logcnt`
FROM `xl_siem_tbl_sample` base
GROUP BY base.`adomid`, time_slice(base.`itime`, INTERVAL 5 minute, floor), base.`src_ip`;
